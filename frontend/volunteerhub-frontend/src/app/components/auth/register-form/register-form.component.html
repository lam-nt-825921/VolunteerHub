<div class="register-form-container">
  <div class="form-header">
    <h2>Hoàn tất đăng ký</h2>
    <p>Tạo mật khẩu để hoàn tất tài khoản của bạn</p>
    @if (initialData) {
      <div class="user-info-preview">
        <p><strong>Họ và tên:</strong> {{ initialData.name }}</p>
        <p><strong>Email:</strong> {{ initialData.email }}</p>
      </div>
    }
  </div>

  <form (ngSubmit)="onRegister()" class="register-form">

    <div class="form-group">
      <label for="password">Mật khẩu</label>
      <input
        type="password"
        id="password"
        [(ngModel)]="registerData.password"
        name="password"
        required
        placeholder="Nhập mật khẩu (tối thiểu 6 ký tự)"
        minlength="6"
      />
    </div>

    <div class="form-group">
      <label for="confirmPassword">Xác nhận mật khẩu</label>
      <input
        type="password"
        id="confirmPassword"
        [(ngModel)]="registerData.confirmPassword"
        name="confirmPassword"
        required
        placeholder="Nhập lại mật khẩu"
      />
    </div>

    @if (errorMessage) {
      <div class="error-message">
        <mat-icon>error</mat-icon>
        <span>{{ errorMessage }}</span>
      </div>
    }

    @if (successMessage) {
      <div class="success-message">
        <mat-icon>check_circle</mat-icon>
        <span>{{ successMessage }}</span>
      </div>
    }

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="goBack.emit()">Quay lại</button>
      <button type="submit" class="btn btn-primary" [disabled]="isLoading">
        @if (isLoading) {
          <span>Đang đăng ký...</span>
        } @else {
          <span>Hoàn tất đăng ký</span>
        }
      </button>
    </div>
  </form>

  <div class="form-footer">
    <p>Đã có tài khoản? <a (click)="onSwitchToLogin()" class="link">Đăng nhập ngay</a></p>
  </div>
</div>

