<nav class="navbar" [class.menu-open]="isMenuOpen()">
  <div class="navbar-container">
    <!-- Logo with Title and Subtitle -->
    <div class="navbar-brand">
      <a href="/" class="logo-link">
        <img 
          src="/LOGO_Volunteer-Hub.png" 
          alt="Logo VolunteerHub" 
          class="logo-img"
        />
        <div class="brand-text">
          <h1 class="brand-title">VolunteerHub</h1>
          <p class="brand-subtitle">Kết nối con người, lan tỏa yêu thương</p>
        </div>
      </a>
    </div>

    <!-- Desktop Navigation -->
    <ul class="navbar-menu desktop-menu">
      <li><a href="#home" class="nav-link">Trang chủ</a></li>
      <li><a href="#about" class="nav-link">Giới thiệu</a></li>
      <li><a href="#volunteer" class="nav-link">Tình nguyện</a></li>
      <li><a href="#organizations" class="nav-link">Tổ chức</a></li>
      <li><a href="#contact" class="nav-link">Liên hệ</a></li>
    </ul>

    <!-- Theme Toggle, Login/User Menu & Mobile Menu Button -->
    <div class="navbar-actions">
      @if (authService.isAuthenticated()) {
        <div class="user-menu">
          <span class="user-name">{{ authService.user()?.name }}</span>
          <button class="btn-logout" (click)="logout()" title="Đăng xuất">
            <mat-icon>logout</mat-icon>
          </button>
        </div>
      } @else {
        <button class="btn-login" (click)="openLoginModal()">
          <mat-icon>login</mat-icon>
          <span class="login-text">Đăng nhập</span>
        </button>
      }

      <button 
        class="theme-toggle" 
        (click)="toggleTheme()"
        [attr.aria-label]="isDarkMode() ? 'Chuyển sang chế độ sáng' : 'Chuyển sang chế độ tối'"
        [attr.title]="isDarkMode() ? 'Chuyển sang chế độ sáng' : 'Chuyển sang chế độ tối'"
      >
        @if (isDarkMode()) {
          <mat-icon>light_mode</mat-icon>
        } @else {
          <mat-icon>dark_mode</mat-icon>
        }
      </button>

      <button 
        class="mobile-menu-toggle" 
        (click)="toggleMenu()"
        [attr.aria-label]="isMenuOpen() ? 'Đóng menu' : 'Mở menu'"
        [attr.title]="isMenuOpen() ? 'Đóng menu' : 'Mở menu'"
        [attr.aria-expanded]="isMenuOpen()"
      >
        <span class="sr-only">{{ isMenuOpen() ? 'Đóng menu' : 'Mở menu' }}</span>
        <span class="hamburger-line" [class.active]="isMenuOpen()"></span>
        <span class="hamburger-line" [class.active]="isMenuOpen()"></span>
        <span class="hamburger-line" [class.active]="isMenuOpen()"></span>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <div class="mobile-menu" [class.open]="isMenuOpen()">
    <ul class="navbar-menu mobile-menu-list">
      <li><a href="#home" class="nav-link" (click)="closeMenu()">Trang chủ</a></li>
      <li><a href="#about" class="nav-link" (click)="closeMenu()">Giới thiệu</a></li>
      <li><a href="#volunteer" class="nav-link" (click)="closeMenu()">Tình nguyện</a></li>
      <li><a href="#organizations" class="nav-link" (click)="closeMenu()">Tổ chức</a></li>
      <li><a href="#contact" class="nav-link" (click)="closeMenu()">Liên hệ</a></li>
    </ul>
  </div>
</nav>

@if (showLoginModal()) {
  <app-login-modal
    (close)="closeLoginModal()"
    (switchToRegister)="closeLoginModal()"
    (loginSuccess)="onLoginSuccess()"
  ></app-login-modal>
}

